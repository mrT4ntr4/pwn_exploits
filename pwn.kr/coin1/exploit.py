from pwn import *
import time
from colorama import Fore,init
import warnings
warnings.filterwarnings("ignore")
init(autoreset=True)


r = remote('pwnable.kr',9007)
print r.recv()
time.sleep(4)

for count in range(0,100):
	details = r.recv()
	n = int(details.split()[0].replace("N=",""))
	c = int(details.split()[1].replace("C=",""))
	print "RECEIVED",details
	index = 0

	while True:
		print "n =",n," index =",index
		if n == 0:
			r.sendline(str(index))
		else:
			guess_ans = " ".join(map(str, range(index, index + n/2 + n%2)))
			print "Sending ", guess_ans, "\n"
			r.sendline(guess_ans)        
		res = r.recvline().strip()
		print "Received ", res, "\n"
		if res.startswith("Wrong") or res.startswith("format"):
			print n, index, "WRONG"
		if res.startswith("Correct!"):
			print Fore.GREEN + "Got {0} coins!".format(count + 1)
			break
		elif not (int(res) % 2):
			index = index + n/2 + n%2
		n /= 2
print r.recv()

r.close()